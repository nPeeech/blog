<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://npeeech.github.io/blog/css/syntax.css">
    <link rel="stylesheet" href="https://npeeech.github.io/blog/css/single.css">
    <link rel="stylesheet" href="https://npeeech.github.io/blog/css/header.css">
    <link rel="stylesheet" href="https://npeeech.github.io/blog/css/footer.css">
    <link rel="stylesheet" href="https://npeeech.github.io/blog/css/list.css">
    <link rel="stylesheet" href="https://npeeech.github.io/blog/css/baseof.css">
    <script src="https://npeeech.github.io/blog/js/header.js"></script>
    
    
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B091BVYLCR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-B091BVYLCR');
    </script>
    
    
    <meta name="msapplication-square70x70logo" content="/favicon/site-tile-70x70.png">
    <meta name="msapplication-square150x150logo" content="/favicon/site-tile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/favicon/site-tile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/favicon/site-tile-310x310.png">
    <meta name="msapplication-TileColor" content="#0078d7">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://npeeech.github.io/blog/favicon/favicon.ico">
    <link rel="icon" type="image/vnd.microsoft.icon" href="https://npeeech.github.io/blog/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://npeeech.github.io/blog/favicon/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="36x36" href="https://npeeech.github.io/blog/favicon/android-chrome-36x36.png">
    <link rel="icon" type="image/png" sizes="48x48" href="https://npeeech.github.io/blog/favicon/android-chrome-48x48.png">
    <link rel="icon" type="image/png" sizes="72x72" href="https://npeeech.github.io/blog/favicon/android-chrome-72x72.png">
    <link rel="icon" type="image/png" sizes="96x96" href="https://npeeech.github.io/blog/favicon/android-chrome-96x96.png">
    <link rel="icon" type="image/png" sizes="128x128" href="https://npeeech.github.io/blog/favicon/android-chrome-128x128.png">
    <link rel="icon" type="image/png" sizes="144x144" href="https://npeeech.github.io/blog/favicon/android-chrome-144x144.png">
    <link rel="icon" type="image/png" sizes="152x152" href="https://npeeech.github.io/blog/favicon/android-chrome-152x152.png">
    <link rel="icon" type="image/png" sizes="192x192" href="https://npeeech.github.io/blog/favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="256x256" href="https://npeeech.github.io/blog/favicon/android-chrome-256x256.png">
    <link rel="icon" type="image/png" sizes="384x384" href="https://npeeech.github.io/blog/favicon/android-chrome-384x384.png">
    <link rel="icon" type="image/png" sizes="512x512" href="https://npeeech.github.io/blog/favicon/android-chrome-512x512.png">
    <link rel="icon" type="image/png" sizes="36x36" href="https://npeeech.github.io/blog/favicon/icon-36x36.png">
    <link rel="icon" type="image/png" sizes="48x48" href="https://npeeech.github.io/blog/favicon/icon-48x48.png">
    <link rel="icon" type="image/png" sizes="72x72" href="https://npeeech.github.io/blog/favicon/icon-72x72.png">
    <link rel="icon" type="image/png" sizes="96x96" href="https://npeeech.github.io/blog/favicon/icon-96x96.png">
    <link rel="icon" type="image/png" sizes="128x128" href="https://npeeech.github.io/blog/favicon/icon-128x128.png">
    <link rel="icon" type="image/png" sizes="144x144" href="https://npeeech.github.io/blog/favicon/icon-144x144.png">
    <link rel="icon" type="image/png" sizes="152x152" href="https://npeeech.github.io/blog/favicon/icon-152x152.png">
    <link rel="icon" type="image/png" sizes="160x160" href="https://npeeech.github.io/blog/favicon/icon-160x160.png">
    <link rel="icon" type="image/png" sizes="192x192" href="https://npeeech.github.io/blog/favicon/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="196x196" href="https://npeeech.github.io/blog/favicon/icon-196x196.png">
    <link rel="icon" type="image/png" sizes="256x256" href="https://npeeech.github.io/blog/favicon/icon-256x256.png">
    <link rel="icon" type="image/png" sizes="384x384" href="https://npeeech.github.io/blog/favicon/icon-384x384.png">
    <link rel="icon" type="image/png" sizes="512x512" href="https://npeeech.github.io/blog/favicon/icon-512x512.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://npeeech.github.io/blog/favicon/icon-16x16.png">
    <link rel="icon" type="image/png" sizes="24x24" href="https://npeeech.github.io/blog/favicon/icon-24x24.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://npeeech.github.io/blog/favicon/icon-32x32.png">
    <title>
         TANG_PriMERを買ったので触る |  いつか黒歴史
    </title>
</head><body><header>
    <div id="header-visual">
        <div id="main-logo-wrapper">
            <a href="https://npeeech.github.io/blog/" id="main-logo"
                style="filter:  drop-shadow(1px 1px 0px rgb(59, 0, 102))  drop-shadow(2px 2px 0px rgb(59, 0, 102))  drop-shadow(3px 3px 0px rgb(59, 0, 102))  drop-shadow(4px 4px 0px rgb(59, 0, 102))  drop-shadow(5px 5px 0px rgb(59, 0, 102))  drop-shadow(6px 6px 0px rgb(59, 0, 102))  drop-shadow(7px 7px 0px rgb(59, 0, 102))  drop-shadow(8px 8px 0px rgb(59, 0, 102))  drop-shadow(9px 9px 0px rgb(59, 0, 102))  drop-shadow(10px 10px 0px rgb(59, 0, 102)) ;">
                いつか黒歴史
            </a>
        </div>
        
        
        <iframe src="https://script.google.com/macros/s/AKfycbzJzZHSEreUpSc9U9hroEUI3g4jJXierBqPC56LyCYEqHzL0f56LdL7yyuuImrVz4ZtbQ/exec" frameborder="0" loading="lazy" scrolling="no" style="height: 1rem;"></iframe>
        
        
    </div>
    <div id="taxonomy-menu">
        
        <a href='https://npeeech.github.io/blog/archives' class="taxonomy-btn">archives</a>
        
        <a href='https://npeeech.github.io/blog/tags' class="taxonomy-btn">tags</a>
        
    </div>
</header><div id="content">
  
    <a class="article-date" href="https://npeeech.github.io/blog/archives/2020-06/">2020年6月15日</a>
  
  <h1>TANG_PriMERを買ったので触る</h1>
  
    <a class="article-tag" href="https://npeeech.github.io/blog/tags/%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA/">環境構築シリーズ</a>
  
    <a class="article-tag" href="https://npeeech.github.io/blog/tags/fpga/">FPGA</a>
  
  <nav id="TableOfContents">
  <ul>
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#環境構築していく">環境構築していく</a></li>
    <li><a href="#ideを入れる">IDEを入れる</a></li>
    <li><a href="#ドライバーを入れる">ドライバーを入れる</a></li>
    <li><a href="#遊ぶ">遊ぶ</a>
      <ul>
        <li><a href="#新しいプロジェクトを作るよ">新しいプロジェクトを作るよ</a></li>
        <li><a href="#ソースファイルを追加">ソースファイルを追加</a></li>
      </ul>
    </li>
    <li><a href="#物理ピンをioポートに割り当てる必要があるそうです">物理ピンをIOポートに割り当てる必要があるそうです．</a>
      <ul>
        <li><a href="#書き込むわよ">書き込むわよ</a></li>
        <li><a href="#動いた">動いた</a></li>
      </ul>
    </li>
  </ul>
</nav>
  <h2 id="はじめに">はじめに</h2>
<p>TANG PriMERとは，AIやら仮想通貨採掘やらで話題なFPGAというやつです．（怒られそう)<br>
<a href="https://jp.seeedstudio.com/Sipeed-TANG-PriMER-FPGA-Development-Board-p-2881.html">Sipeed TANG PriMER FPGA開発ボード</a></p>
<p>スペックを読めないので，これが高いのか安いのかは判断しかねますが，手ごろな価格であるのは確かだと思います．<br>
以前からFPGAには興味を持っていたのですが，敷居と値段の高さを感じていたところ，いいものを見つけたのでついポチってしまいました．Sipeedというのもありました．</p>
<h2 id="環境構築していく">環境構築していく</h2>
<p><strong><a href="https://nextpublishing.jp/book/11936.html">GetStarted</a>見たほうが正確だと思います．</strong></p>
<ul>
<li>私の環境
<ul>
<li>CPU : i5-8250U</li>
<li>OS : Windows10</li>
</ul>
</li>
</ul>
<p>私はOfficeとOneDriveのせいでWindows10を使っていますが，Linuxでの方法も書いてありました．</p>
<h2 id="ideを入れる">IDEを入れる</h2>
<ul>
<li>GetStartedから飛んだページからそれっぽいファイルを落とします．人間チャレンジがあるので正解してください．(1敗)<br>
<a href="https://dl.sipeed.com/TANG/Primer/IDE">https://dl.sipeed.com/TANG/Primer/IDE</a></li>
<li>適当にハッシュ値をチェックをします．</li>
</ul>
<p>


	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_installer.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_installer_huf33e612d06277855d077c7ac2f7ec628_70737_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 <br>
インストーラーを起動したら中国語でちょっとびっくりしました．<br>
すべてNextっぽいボタンを押しておきました．<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_screenshot.jpg">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_screenshot_hu794a099115f7f655196e81141fd0cbd4_73200_400x400_fit_q70_box.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 <br>
IDE本体は英語のようで安心しました．</p>
<h2 id="ドライバーを入れる">ドライバーを入れる</h2>
<p>ドライバーの署名云々でセキュアブートを切っていないとうまくインストールできないようです．
私はすでに切っていたので特に問題ありませんでした．</p>
<ul>
<li>デバイスマネージャーを開き，jtag cabelのような名前のデバイスを探します．それがTANG PriMERです．</li>
<li>それをダブルクリックしてプロパティを開きます．</li>
<li>ドライバーの更新からコンピューターを参照を選び，C:\Anlogic\TD4.6.4\driver\win8_10_64にあるドライバーのインストールを試みます．</li>
</ul>
<h2 id="遊ぶ">遊ぶ</h2>
<p>動作確認もかねて動かしたいです．</p>
<h3 id="新しいプロジェクトを作るよ">新しいプロジェクトを作るよ</h3>
<p>早速IDEを起動して，Project&gt;New Projectします．<br>
乗っているチップがAnlogic Technologies EG4S20という名前なのでそれっぽいのを選びます．<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_new_proj_wizard.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_new_proj_wizard_hu3efb4813d124b993c89816c274235be1_8563_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 <br>
&hellip;たくさんありますね．<br>
<a href="http://akizukidenshi.com/catalog/g/gM-14786/">秋月</a>を見たところFPGA：EG4S20BG256とあったので助かりました．
ありがとう秋月！<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_new_proj_wizard2.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_new_proj_wizard2_hu2f57bb45b55f91795fca1cc02df8dc98_3980_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 </p>
<h3 id="ソースファイルを追加">ソースファイルを追加</h3>
<p>公式に使い方があったのでそっちを見ながらやっていきます．<br>
<a href="https://tang.sipeed.com/en/using-tang/using-gpio/">https://tang.sipeed.com/en/using-tang/using-gpio/</a></p>
<ul>
<li>左側のHierarchyを右クリック，New Sourceで適当な名前を付けてソースファイルを追加します．</li>
<li>とりあえず公式のコードを借ります．<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_hello_code.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_hello_code_huebc4bc5124205e1431fdfd2e380c7dd1_59768_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 <br>
なんとなくボタンを押したらLEDが光りそうなコードに思えます．</li>
</ul>
<h2 id="物理ピンをioポートに割り当てる必要があるそうです">物理ピンをIOポートに割り当てる必要があるそうです．</h2>
<p>早速ボタンを押してみたいですが，まだやることがあるようです．</p>
<ul>
<li>IO Containsをダブルクリックします．<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_io.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_io_hu49612166b1dec11004450395ddfb7607_60694_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 </li>
<li><a href="https://github.com/Lichee-Pi/Tang_FPGA_Examples/blob/master/0.LED/constraint/io.adc">サンプルコード</a>を参考にそれっぽいピンを選択します．<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_io2.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_io2_hu71817428f2020bc760e820c72d570a53_53150_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 <br>
このようにしました．Bankとは何なのでしょう&hellip;</li>
</ul>
<p>適当な名前を付けて保存します．</p>
<h3 id="書き込むわよ">書き込むわよ</h3>
<p>ついに動かせます．やった．</p>
<ul>
<li>Runアイコンを押します．文字がたくさん流れてきてどきどきしますね．</li>
<li>FPGAに変化はありません．コンパイルだけだったようです．</li>
<li>続いてDownloadアイコンを押します．</li>
<li>Addアイコンを押し，[Project名].bitファイルを選択します．</li>
<li>Runアイコンを押すと書き込まれるようです．<br>
この時に上部のModeがJTAGだと電源を落としたら消える書き込み，PROGEAM FLASHだと電源を切っても消えない書き込みになるようです．(多分)<br>



	


	



	
	<figure style="display: inline-block;
	border: thin #000000 solid;
	border-radius: 8px;
    padding: 10px;
	margin: 5px;
	width: 80%;
    max-width: 400px;
	box-shadow: 0px 0px 10px gray;
	background: radial-gradient(rgb(24, 24, 24) 0%, rgb(255, 255, 255) 80%);;
	">
		<figcaption style="font: sans-serif;"></figcaption>
		
		<a href="https://npeeech.github.io/blog/play_with_tang_primer/td_flash.png">
			<img src="https://npeeech.github.io/blog/play_with_tang_primer/td_flash_hu37c7967062035f9de7e24af7b4edfdec_21390_400x400_fit_q70_bgffffff_box_3.jpg" alt="" style="width: min(100%, 400px); vertical-align: bottom;border: thin#000000 solid;">
		</a>
	</figure>
 <br>
とりあえずJTAG Modeで書き込んでみました．</li>
</ul>
<h3 id="動いた">動いた</h3>
<p><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">動作確認完了 <a href="https://t.co/lyoxwQwkbz">pic.twitter.com/lyoxwQwkbz</a></p>&mdash; ゑぬ (@nPeeech) <a href="https://twitter.com/nPeeech/status/1277942804996448257?ref_src=twsrc%5Etfw">June 30, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<br>
Verilog学んで本格的に遊んでいきたいです．やはり基板やICは見てると興奮してきますね．</p>


        </div><footer>
    <p id="copyright">
        &copy; 2021 nPeeech.
    </p>
</footer></body>
</html>
